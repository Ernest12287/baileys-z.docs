<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Logger.js - Baileys-z Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0a0a0a;
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 3px solid #daa520;
            margin-bottom: 30px;
        }

        .header img {
            height: 100px;
            border-radius: 15px;
            border: 3px solid #daa520;
            box-shadow: 0 6px 20px rgba(218, 165, 32, 0.4);
            margin-bottom: 20px;
        }

        h1 {
            color: #daa520;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        h2 {
            color: #ffd700;
            font-size: 2em;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #8b6914;
        }

        h3 {
            color: #daa520;
            font-size: 1.5em;
            margin: 20px 0 15px 0;
        }

        .intro-box {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2416 100%);
            border: 3px solid #daa520;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }

        .code-section {
            background-color: #1a1a1a;
            border: 2px solid #8b6914;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .copy-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #8b6914 0%, #daa520 100%);
            color: #0a0a0a;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .copy-btn:hover {
            background: linear-gradient(135deg, #daa520 0%, #ffd700 100%);
            transform: translateY(-2px);
        }

        pre {
            background-color: #0d0d0d;
            border-radius: 5px;
            padding: 20px;
            overflow-x: auto;
            margin-top: 50px;
        }

        code {
            color: #ffd700;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .explanation {
            background-color: #0f0f0f;
            border-left: 5px solid #daa520;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .warning {
            background-color: #2d1a1a;
            border-left: 5px solid #ff6b6b;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .success {
            background-color: #1a2d1a;
            border-left: 5px solid #4caf50;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-item {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2416 100%);
            border: 2px solid #8b6914;
            border-radius: 10px;
            padding: 20px;
        }

        .feature-item h4 {
            color: #daa520;
            margin-bottom: 10px;
        }

        ul {
            margin-left: 25px;
            margin-top: 10px;
        }

        li {
            margin-bottom: 8px;
        }

        .log-example {
            background-color: #0d0d0d;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .log-line {
            margin: 5px 0;
            padding: 5px;
        }

        .log-error { color: #ff6b6b; }
        .log-warn { color: #ffa500; }
        .log-info { color: #4caf50; }
        .log-debug { color: #2196f3; }
        .log-success { color: #00ff00; }

        footer {
            margin-top: 50px;
            padding: 30px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2416 100%);
            border-top: 3px solid #8b6914;
            border-radius: 10px;
            text-align: center;
        }

        footer a {
            color: #daa520;
            text-decoration: none;
            margin: 0 10px;
        }

        footer a:hover {
            color: #ffd700;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="../images/social_card.jpeg" alt="Baileys-z Logo">
            <h1>üìù Final Production Logger Implementation</h1>
            <p style="color: #b8860b; margin-top: 10px;">Professional Logging with Ernest-Logger</p>
        </div>

        <div class="intro-box">
            <h3>üéØ What This Logger Provides</h3>
            <ul>
                <li>‚úÖ Multiple log levels (error, warn, info, debug, success)</li>
                <li>‚úÖ Colored console output for easy scanning</li>
                <li>‚úÖ Timestamp tracking for all logs</li>
                <li>‚úÖ File logging for production environments</li>
                <li>‚úÖ Log rotation to prevent huge files</li>
                <li>‚úÖ Environment-aware configuration</li>
                <li>‚úÖ Performance monitoring capabilities</li>
            </ul>
        </div>

        <h2>üì¶ Installing Ernest-Logger</h2>
        <div class="code-section">
            <button class="copy-btn" onclick="copyCode('installCode')">üìã Copy</button>
            <pre><code id="installCode">npm install ernest-logger</code></pre>
        </div>

        <h2>üîß Complete logger.js Implementation</h2>
        <div class="code-section">
            <button class="copy-btn" onclick="copyCode('loggerCode')">üìã Copy Code</button>
            <pre><code id="loggerCode">// logger.js - Production-Ready Logging Configuration
// Ernest Tech House - Baileys-z Documentation

import { createLogger } from 'ernest-logger';
import path from 'path';
import { fileURLToPath } from 'url';
import fs from 'fs';

// Get current directory (for ESM modules)
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// ============================================
// 1. LOGGER CONFIGURATION
// ============================================

// Determine environment
const isDevelopment = process.env.NODE_ENV !== 'production';
const logLevel = process.env.LOG_LEVEL || (isDevelopment ? 'debug' : 'info');

// Create logs directory if it doesn't exist
const logsDir = path.join(__dirname, 'logs');
if (!fs.existsSync(logsDir)) {
    fs.mkdirSync(logsDir, { recursive: true });
}

// ============================================
// 2. CREATE LOGGER INSTANCE
// ============================================

const logger = createLogger({
    // Log level - controls verbosity
    level: logLevel,
    
    // Enable colored output for better readability
    colors: true,
    
    // Show timestamps on all logs
    timestamp: true,
    
    // Custom timestamp format
    timestampFormat: 'YYYY-MM-DD HH:mm:ss',
    
    // Log format template
    format: '{timestamp} [{level}] {message}',
    
    // Custom log levels with colors
    customLevels: {
        error: {
            color: 'red',
            priority: 0,
            stdout: false  // Errors go to stderr
        },
        warn: {
            color: 'yellow',
            priority: 1,
            stdout: true
        },
        info: {
            color: 'green',
            priority: 2,
            stdout: true
        },
        debug: {
            color: 'blue',
            priority: 3,
            stdout: true
        },
        success: {
            color: 'brightGreen',
            priority: 2,
            stdout: true
        },
        trace: {
            color: 'gray',
            priority: 4,
            stdout: true
        }
    },
    
    // ============================================
    // 3. FILE LOGGING CONFIGURATION
    // ============================================
    
    // Enable file logging in production
    fileLogging: {
        enabled: process.env.ENABLE_FILE_LOGGING === 'true' || !isDevelopment,
        
        // Main log file
        filename: path.join(logsDir, 'bot.log'),
        
        // Error-only log file
        errorFilename: path.join(logsDir, 'errors.log'),
        
        // Maximum file size before rotation (10MB)
        maxSize: 10 * 1024 * 1024,
        
        // Keep last 7 log files
        maxFiles: 7,
        
        // Compress old logs
        compress: true,
        
        // Date pattern for rotated files
        datePattern: 'YYYY-MM-DD',
    },
    
    // ============================================
    // 4. ADVANCED OPTIONS
    // ============================================
    
    // Pretty print objects and arrays
    prettyPrint: isDevelopment,
    
    // Include stack traces for errors
    includeStackTrace: true,
    
    // Maximum depth for object inspection
    inspectDepth: 3,
    
    // Redact sensitive information
    redact: ['password', 'token', 'apiKey', 'secret'],
    
    // Add metadata to all logs
    metadata: {
        application: 'Baileys-z Bot',
        environment: process.env.NODE_ENV || 'development',
        pid: process.pid
    }
});

// ============================================
// 5. CUSTOM HELPER METHODS
// ============================================

/**
 * Log a message with performance timing
 * @param {string} label - Timer label
 */
logger.startTimer = function(label) {
    const start = Date.now();
    return {
        end: () => {
            const duration = Date.now() - start;
            logger.debug(`‚è±Ô∏è  ${label} completed in ${duration}ms`);
            return duration;
        }
    };
};

/**
 * Log with context information
 * @param {string} context - Context identifier (e.g., 'MessageHandler')
 * @param {string} level - Log level
 * @param {string} message - Log message
 * @param {object} meta - Additional metadata
 */
logger.withContext = function(context, level, message, meta = {}) {
    const contextualMessage = `[${context}] ${message}`;
    logger[level](contextualMessage, meta);
};

/**
 * Log HTTP-style request/response
 * @param {object} req - Request object
 * @param {object} res - Response object
 */
logger.logRequest = function(req, res) {
    const duration = res.duration || 0;
    const statusColor = res.status >= 400 ? 'error' : 'info';
    
    logger[statusColor](
        `${req.method} ${req.url} ${res.status} ${duration}ms`
    );
};

/**
 * Log bot-specific message events
 * @param {string} type - Message type (incoming, outgoing)
 * @param {object} data - Message data
 */
logger.logMessage = function(type, data) {
    const { from, to, content, mediaType } = data;
    const direction = type === 'incoming' ? 'üì®' : 'üì§';
    
    logger.info(
        `${direction} ${type.toUpperCase()}: ${from || 'unknown'} ‚Üí ${to || 'unknown'} [${mediaType || 'text'}]`
    );
    
    if (content && logLevel === 'debug') {
        logger.debug(`Content: ${content.substring(0, 100)}...`);
    }
};

/**
 * Log system metrics
 * @param {object} metrics - System metrics
 */
logger.logMetrics = function(metrics) {
    const { memory, cpu, uptime } = metrics;
    
    logger.info('üìä System Metrics:');
    logger.info(`   Memory: ${(memory.used / 1024 / 1024).toFixed(2)} MB / ${(memory.total / 1024 / 1024).toFixed(2)} MB`);
    logger.info(`   CPU: ${cpu.toFixed(2)}%`);
    logger.info(`   Uptime: ${formatUptime(uptime)}`);
};

/**
 * Create a child logger with specific context
 * @param {string} module - Module name
 * @returns {object} Child logger
 */
logger.child = function(module) {
    return {
        error: (msg, meta) => logger.withContext(module, 'error', msg, meta),
        warn: (msg, meta) => logger.withContext(module, 'warn', msg, meta),
        info: (msg, meta) => logger.withContext(module, 'info', msg, meta),
        debug: (msg, meta) => logger.withContext(module, 'debug', msg, meta),
        success: (msg, meta) => logger.withContext(module, 'success', msg, meta),
    };
};

// ============================================
// 6. STARTUP INFORMATION
// ============================================

logger.info('üöÄ Logger initialized');
logger.info(`üìù Log Level: ${logLevel}`);
logger.info(`üåç Environment: ${process.env.NODE_ENV || 'development'}`);
logger.info(`üìÅ Log Directory: ${logsDir}`);

if (isDevelopment) {
    logger.debug('üîß Running in DEVELOPMENT mode - verbose logging enabled');
} else {
    logger.info('üöÄ Running in PRODUCTION mode - logging to files');
}

// ============================================
// 7. HELPER FUNCTIONS
// ============================================

/**
 * Format uptime in human-readable format
 * @param {number} seconds - Uptime in seconds
 * @returns {string} Formatted uptime
 */
function formatUptime(seconds) {
    const days = Math.floor(seconds / 86400);
    const hours = Math.floor((seconds % 86400) / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const secs = Math.floor(seconds % 60);
    
    const parts = [];
    if (days > 0) parts.push(`${days}d`);
    if (hours > 0) parts.push(`${hours}h`);
    if (minutes > 0) parts.push(`${minutes}m`);
    if (secs > 0 || parts.length === 0) parts.push(`${secs}s`);
    
    return parts.join(' ');
}

// ============================================
// 8. EXPORT LOGGER
// ============================================

export default logger;</code></pre>
        </div>

        <h2>üé® Visual Examples: What Your Logs Look Like</h2>
        <div class="log-example">
            <div class="log-line log-success">2024-01-15 14:30:25 [SUCCESS] ‚úÖ Successfully connected to WhatsApp!</div>
            <div class="log-line log-info">2024-01-15 14:30:26 [INFO] üì® INCOMING: 254793859108 ‚Üí bot [text]</div>
            <div class="log-line log-debug">2024-01-15 14:30:26 [DEBUG] Content: !ping</div>
            <div class="log-line log-info">2024-01-15 14:30:27 [INFO] üì§ OUTGOING: bot ‚Üí 254793859108 [text]</div>
            <div class="log-line log-debug">2024-01-15 14:30:27 [DEBUG] ‚è±Ô∏è  Command processing completed in 43ms</div>
            <div class="log-line log-warn">2024-01-15 14:31:10 [WARN] ‚ö†Ô∏è  Rate limit approaching for 254712345678</div>
            <div class="log-line log-error">2024-01-15 14:32:05 [ERROR] ‚ùå Connection closed: Network failure</div>
            <div class="log-line log-info">2024-01-15 14:32:10 [INFO] üîÑ Reconnecting... Attempt 1/5</div>
        </div>

        <h2>üí° Usage Examples</h2>
        
        <div class="feature-grid">
            <div class="feature-item">
                <h4>Basic Logging</h4>
                <pre><code>import logger from './logger.js';

// Different log levels
logger.error('Something broke!');
logger.warn('Be careful here');
logger.info('Just informing you');
logger.debug('Debug details');
logger.success('Operation completed!');</code></pre>
            </div>

            <div class="feature-item">
                <h4>With Metadata</h4>
                <pre><code>logger.info('User logged in', {
    userId: '12345',
    ip: '192.168.1.1',
    timestamp: new Date()
});</code></pre>
            </div>

            <div class="feature-item">
                <h4>Performance Timing</h4>
                <pre><code>const timer = logger.startTimer('Database query');

// Your code here
await database.query(...);

timer.end(); // Logs elapsed time</code></pre>
            </div>

            <div class="feature-item">
                <h4>Contextual Logging</h4>
                <pre><code>// Create module-specific logger
const msgLogger = logger.child('MessageHandler');

msgLogger.info('Processing message');
msgLogger.error('Failed to send');</code></pre>
            </div>

            <div class="feature-item">
                <h4>Message Logging</h4>
                <pre><code>logger.logMessage('incoming', {
    from: '254793859108',
    to: 'bot',
    content: 'Hello bot!',
    mediaType: 'text'
});</code></pre>
            </div>

            <div class="feature-item">
                <h4>System Metrics</h4>
                <pre><code>logger.logMetrics({
    memory: process.memoryUsage(),
    cpu: process.cpuUsage(),
    uptime: process.uptime()
});</code></pre>
            </div>
        </div>

        <h2>üîß Configuration via Environment Variables</h2>
        <div class="code-section">
            <button class="copy-btn" onclick="copyCode('envConfig')">üìã Copy</button>
            <pre><code id="envConfig"># .env file

# Logging Configuration
LOG_LEVEL="info"                # debug, info, warn, error
ENABLE_FILE_LOGGING="true"      # Enable logging to files
NODE_ENV="production"           # production or development

# Application
BOT_NAME="My WhatsApp Bot"
BOT_OWNER_NUMBER="254793859108"</code></pre>
        </div>

        <div class="explanation">
            <h3>üìä Log Levels Explained</h3>
            <ul>
                <li><strong>error (0):</strong> Critical errors that need immediate attention</li>
                <li><strong>warn (1):</strong> Warning messages for potential issues</li>
                <li><strong>info (2):</strong> General informational messages</li>
                <li><strong>success (2):</strong> Successful operations (custom level)</li>
                <li><strong>debug (3):</strong> Detailed debugging information</li>
                <li><strong>trace (4):</strong> Very verbose tracing information</li>
            </ul>
            <p><strong>How it works:</strong> If you set level to "info", you'll see error, warn, info, and success messages, but not debug or trace.</p>
        </div>

        <div class="warning">
            <h3>‚ö†Ô∏è Production Best Practices</h3>
            <ul>
                <li><strong>Always use LOG_LEVEL="info"</strong> in production (debug creates huge logs)</li>
                <li><strong>Enable file logging</strong> for audit trails and debugging</li>
                <li><strong>Set up log rotation</strong> to prevent disk space issues</li>
                <li><strong>Monitor your logs directory</strong> size regularly</li>
                <li><strong>Never log sensitive data</strong> like passwords or API keys</li>
            </ul>
        </div>

        <div class="success">
            <h3>‚úÖ What You Get</h3>
            <ul>
                <li>üé® <strong>Beautiful colored output</strong> - Instantly identify log importance</li>
                <li>‚è∞ <strong>Precise timestamps</strong> - Know exactly when events occurred</li>
                <li>üìÅ <strong>Automatic file logging</strong> - Persistent logs for analysis</li>
                <li>üîÑ <strong>Log rotation</strong> - Prevents disk space issues</li>
                <li>üéØ <strong>Context awareness</strong> - Module-specific logging</li>
                <li>‚ö° <strong>Performance tracking</strong> - Built-in timer utilities</li>
                <li>üîí <strong>Security</strong> - Automatic redaction of sensitive data</li>
            </ul>
        </div>

        <h2>üìÅ Log File Structure</h2>
        <div class="code-section">
            <pre><code>my-whatsapp-bot/
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îú‚îÄ‚îÄ bot.log                    # All logs
‚îÇ   ‚îú‚îÄ‚îÄ errors.log                 # Errors only
‚îÇ   ‚îú‚îÄ‚îÄ bot.log.2024-01-14.gz     # Rotated logs (compressed)
‚îÇ   ‚îî‚îÄ‚îÄ bot.log.2024-01-13.gz
‚îî‚îÄ‚îÄ logger.js                      # Your logger configuration</code></pre>
        </div>

        <div class="explanation">
            <h3>üîç How Log Rotation Works</h3>
            <p>When your log file reaches 10MB (configurable), the logger automatically:</p>
            <ol>
                <li>Renames current log with date: <code>bot.log</code> ‚Üí <code>bot.log.2024-01-15</code></li>
                <li>Compresses the old log: <code>bot.log.2024-01-15.gz</code></li>
                <li>Creates a fresh <code>bot.log</code> file</li>
                <li>Deletes logs older than 7 days (keeps last 7 files)</li>
            </ol>
            <p><strong>Result:</strong> Your logs directory never grows out of control!</p>
        </div>

        <footer>
            <h3 style="color: #daa520; margin-bottom: 15px;">Ernest Tech House</h3>
            <p><strong>Maintained by:</strong> Pease Ernest</p>
            <div style="margin-top: 15px;">
                <a href="mailto:peaseearnest@gmail.com">üìß Email</a> |
                <a href="https://github.com/peaseernest/baileys-z">üíª GitHub</a> |
                <a href="https://wa.me/254793859108">üì± WhatsApp</a>
            </div>
            <p style="margin-top: 20px; color: #8b6914;">¬© 2024 Ernest Tech House | Use responsibly</p>
        </footer>
    </div>

    <script>
        function copyCode(elementId) {
            const codeElement = document.getElementById(elementId);
            const codeText = codeElement.textContent;
            
            navigator.clipboard.writeText(codeText).then(() => {
                alert('‚úÖ Code copied to clipboard!');
            }).catch(err => {
                console.error('Copy failed:', err);
                alert('‚ùå Copy failed. Please copy manually.');
            });
        }
    </script>
</body>
</html>